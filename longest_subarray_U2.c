#include <stdio.h>
#include <stdlib.h>

int is_odd(int n)
{
	if (n % 2 == 1)
		return (1);
	else
		return (0);
}
int ft_strlen(char *s)
{
	int i = 0;

	while (*s)
	{
		i++;
		s++;
	}
	return (i);
}
char *ft_strndup(char *s, int len)
{
	int i = -1;
	char *p;

	p = (char *)malloc(sizeof(char) * (len + 1));
	p[len] = '\0';

	while (++i < len)
		p[i] = s[i];
	return (p);
}
int min_odd_even(char *s)
{
	int odds = 0;
	int evens = 0;

	while (*s)
	{
		if (is_odd(*s - '0'))
			odds++;
		else
			evens++;
		s++;
	}
	return(odds < evens ? odds : evens);
}
// note, len is cur_len and not max_len !!!
int bal(char *s, int len)
{
	int b = 0;
	int i = 0;

	while (i < len)
	{
		if (is_odd(s[i] - '0'))
			b++;
		else
			b--;
		i++;
	}
	return (b);
}

char *longest_subarray(char *s)
{
	int max_len;
	int cur_len;
	int i;

	max_len = ft_strlen(s);
	cur_len = 2 * min_odd_even(s);
	i = 0;

	//printf("222a %s %d %d\n", &s[i], cur_len, bal(&s[i], cur_len));
	while (bal(&s[i], cur_len) != 0)
	{
		//printf("222b %s %d\n", &s[i], cur_len);
		if (i + cur_len >= max_len)
		{
			i = 0;
			cur_len--;
		}
		else
			i++;
	}
	return(ft_strndup(&s[i], cur_len));
}

int main()
{
	char s1[] = "12435";
	printf("%s\n", longest_subarray(s1));
	char str1[] = "1357913579024680213579";
	printf("79135790246802\n%s\n", longest_subarray(str1));
	char str2[] = "134";
	printf("\n34\n%s\n", longest_subarray(str2));
	char str3[] = "454";
	printf("\n45\n%s\n", longest_subarray(str3));
	char str4[] = "2010102";
	printf("\n0101\n%s\n", longest_subarray(str4));
	char str5[] = "2";
	printf("\n[blank]\n%s\n", longest_subarray(str5));
	char str6[] = "";
	printf("\n[blank]\n%s\n", longest_subarray(str6));
	//Moulinette test 6
	//char str7[] = "222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222202222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222202222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222223222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222122222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222220222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222253222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222322222222222222222222222222222222222222222222222222222022222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222292222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222022222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222";
	//printf("\n2253\n%s\n", longest_subarray(str7));
}
